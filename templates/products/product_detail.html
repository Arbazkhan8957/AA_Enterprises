{% extends 'base.html' %}
{% load static %}

{% block content %}
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<div class="max-w-6xl mx-auto px-4 py-16 animate-page-fade-in">
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 items-start">

    <!-- Image Box -->
    <div class="relative product-block opacity-0 translate-y-5 transition-all duration-700 ease-out group h-full">
      <div class="absolute -inset-3 rounded-xl shadow-[0_15px_40px_rgba(0,0,0,0.12)] group-hover:shadow-[0_30px_80px_rgba(0,0,0,0.2)] transition-shadow duration-500 z-0"></div>
      <div class="absolute -inset-1 rounded-xl shadow-[0_5px_15px_rgba(0,0,0,0.06)] group-hover:shadow-[0_15px_40px_rgba(0,0,0,0.12)] transition-shadow duration-500 z-0"></div>

      <div class="relative bg-white rounded-xl overflow-hidden border border-gray-100 z-10 shadow-lg transition-transform duration-500 hover:-translate-y-2 hover:scale-105 h-full flex items-center justify-center">
        <img
          src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'images/placeholder-product.png' %}{% endif %}"
          alt="{{ product.name }}"
          class="w-11/12 h-72 sm:h-80 md:h-96 object-contain transition-transform duration-500 group-hover:scale-105 group-hover:brightness-95 group-hover:contrast-110 shadow-inner rounded-xl"
        />
        <div class="absolute inset-0 flex flex-col items-center justify-center bg-indigo-500/70 backdrop-blur-sm text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl p-4">
          <i class="fa-solid fa-gem text-3xl mb-2 animate-bounce"></i>
          <h3 class="text-lg sm:text-xl font-semibold text-white text-center">{{ product.name }}</h3>
          <div class="flex gap-2 mt-3 flex-wrap justify-center">
            <span class="px-3 py-1 bg-white text-indigo-600 text-xs rounded-full font-medium shadow-sm flex items-center gap-1">
              <i class="fa-solid fa-cube"></i> Company
            </span>
            <span class="px-3 py-1 bg-white text-indigo-600 text-xs rounded-full font-medium shadow-sm flex items-center gap-1">
              <i class="fa-solid fa-tag"></i> {{ product.category.name }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Details Box -->
    <div class="space-y-6 product-block opacity-0 translate-y-5 transition-all duration-700 ease-out delay-200 h-full">
      <div class="bg-white rounded-xl border border-gray-100 shadow-lg p-6 sm:p-8 flex flex-col justify-between h-full hover:shadow-2xl transition-all duration-500">
        <div>
          <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 flex items-center gap-2 mb-4">
            <i class="fa-solid fa-boxes-stacked text-indigo-500"></i> {{ product.name }}
          </h1>
          <div class="flex flex-col sm:flex-row sm:gap-8 text-gray-700 mb-4">
            <p class="flex-1 flex items-center gap-2"><i class="fa-solid fa-cube text-indigo-500"></i> <span class="font-semibold">Brand:</span> {{ product.brand.name }}</p>
            <p class="flex-1 flex items-center gap-2"><i class="fa-solid fa-tag text-indigo-500"></i> <span class="font-semibold">Category:</span> {{ product.category.name }}</p>
          </div>
          <div class="mb-6">
            <h2 class="text-xl font-semibold mb-2 flex items-center gap-2"><i class="fa-solid fa-align-left text-indigo-500"></i> Description</h2>
            <p class="text-gray-700 leading-relaxed">{{ product.description }}</p>
          </div>
        </div>
        <div class="flex flex-col sm:flex-row sm:items-center sm:gap-4 gap-4 mt-auto">
          {% if product.datasheet %}
            <a href="{{ product.datasheet.url }}" download class="inline-flex items-center gap-2 px-5 py-3 rounded-lg bg-indigo-500 text-white font-medium transition-all duration-300 hover:bg-indigo-700 hover:shadow-lg hover:-translate-y-0.5">
              <i class="fa-solid fa-file-arrow-down"></i> Download Datasheet
            </a>
          {% endif %}
          <a href="{% url 'products' %}" class="inline-flex items-center gap-2 px-5 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 hover:border-gray-400 transition font-medium">
            <i class="fa-solid fa-arrow-left"></i> Back to Products
          </a>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const blocks = document.querySelectorAll(".product-block");
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.remove("opacity-0", "translate-y-5");
        entry.target.classList.add("opacity-100", "translate-y-0");
      }
    });
  }, { threshold: 0.1 });
  blocks.forEach(block => observer.observe(block));
});
</script>

<style>
@layer utilities {
  .animate-page-fade-in { animation: fadeIn 0.8s ease-out; }
  .animate-bounce { animation: bounce 1s infinite; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes bounce { 0%,100%{transform:translateY(0);}50%{transform:translateY(-6px);} }
  .delay-200 { transition-delay: 0.2s; }
}
</style>
{% endblock %}
