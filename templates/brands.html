{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="bg-gradient-to-b from-slate-100 via-white to-slate-200 py-20">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-12">

    <!-- Section Header -->
    <div class="text-center mb-16">
      <h2 class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-indigo-700 mb-4 animate-fade-down">
        ✨ Our Trusted Electrical Companies ✨
      </h2>
      <p class="text-gray-600 text-base sm:text-lg md:text-xl max-w-2xl mx-auto animate-fade-in">
        Powering progress with world-class partnerships for unmatched product quality and performance.
      </p>
    </div>

    {% if brands %}
      <div id="brandGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 sm:gap-8 items-center justify-items-center">
        {% for brand in brands %}
          <a href="{% if brand.get_absolute_url %}{{ brand.get_absolute_url }}{% else %}#{% endif %}" class="group w-full">

            <!-- Brand Card -->
            <div class="brand-card relative group p-4 bg-white rounded-2xl shadow-xl transition-all duration-500 transform hover:-translate-y-2 hover:scale-105 flex flex-col items-center text-center cursor-pointer opacity-0 scale-90 animate-brand"
                 style="animation-delay: {{ forloop.counter0|add:"0.1"|floatformat:1 }}s">

              <!-- Image wrapper with hover overlay -->
              <div class="relative w-full h-36 sm:h-44 md:h-52 mb-4 rounded-xl overflow-hidden shadow-inner shadow-[0_10px_25px_rgba(0,0,0,0.1)] transition-all duration-500 transform group-hover:scale-105">
                {% if brand.logo %}
                  <img src="{{ brand.logo.url }}"
                       alt="{{ brand.name }} logo"
                       class="w-full h-full object-contain transition-all duration-500 group-hover:brightness-75 group-hover:contrast-125 floating-logo"
                       loading="lazy"
                       decoding="async"
                       onerror="this.src='{% static 'images/placeholder-logo.png' %}'">
                {% else %}
                  <img src="{% static 'images/placeholder-logo.png' %}"
                       alt="{{ brand.name }} logo"
                       class="w-full h-full object-contain">
                {% endif %}

                <!-- Hover Overlay / Bubble -->
                <span class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-indigo-500/70 text-white font-semibold text-lg rounded-xl transition-opacity duration-300 shadow-lg text-center px-2">
                  {{ brand.name }}
                </span>
              </div>

              <!-- Brand Name with Icon -->
              <h1 class="text-base sm:text-lg md:text-xl font-semibold text-gray-900 tracking-wide hover:text-indigo-600 transition-colors flex items-center justify-center gap-2">
                {{ brand.name }} <i class="fa-solid fa-box-open"></i>
              </h1>

            </div>
          </a>
        {% endfor %}
      </div>
    {% else %}
      <div class="text-center py-12 animate-fade-in">
        <p class="text-gray-600 italic">No brands added yet.</p>
      </div>
    {% endif %}
  </div>
</div>

<!-- Scroll Animations -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const cards = document.querySelectorAll(".brand-card");
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.remove("opacity-0", "scale-90");
        entry.target.classList.add("opacity-100", "scale-100");
      }
    });
  }, { threshold: 0.1 });
  cards.forEach(card => observer.observe(card));
});
</script>

<!-- Animations & Floating Logo -->
<style>
@layer utilities {
  .animate-fade-down { animation: fadeDown 0.9s ease-out both; }
  .animate-fade-in { animation: fadeIn 1s ease-out both; }
  .animate-brand { animation: fadeInUp 0.8s ease-out both; }
  .animate-bounce { animation: bounce 1s infinite; }

  @keyframes fadeDown {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
  }
}

.floating-logo {
  animation: float 3s ease-in-out infinite;
}
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}
</style>

<!-- Font Awesome CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-yz8e+..." crossorigin="anonymous" referrerpolicy="no-referrer" />

{% endblock %}
